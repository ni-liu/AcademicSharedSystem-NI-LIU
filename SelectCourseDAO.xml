<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.javaee.ass.dao.SelectCourseDAO">
    <resultMap id="selectCourseDOMap" type="selectCourseDO">
        <id property="pkId" column="PK_ID"/>
        <result property="stuId" column="STU_ID"/>
        <result property="courseId" column="COURSE_ID"/>
        <result property="score" column="SCORE"
                jdbcType="SMALLINT" javaType="com.javaee.ass.entity.enums.ScoreEnum"
                typeHandler="com.javaee.ass.entity.typehandler.ScoreEnumTypeHandler"/>
        <result property="schedule" column="SCHEDULE"/>
    </resultMap>

    <insert id="insert" parameterType="string" keyProperty="PK_ID" useGeneratedKeys="true">
        INSERT INTO ASS_SELECT_COURSE(STU_ID , COURSE_ID)
        VALUES (#{stuId} , #{courseId})
    </insert>

    <update id="insertScore">
        UPDATE ASS_SELECT_COURSE
        SET SCORE = #{score}
        WHERE PK_ID = #{pkId}
    </update>

    <update id="insertSchedule">
        UPDATE ASS_SELECT_COURSE
        SET SCHEDULE = #{schedule}
        WHERE PK_ID = #{pkId}
    </update>

    <select id="searchAvgScoreByCourseId" parameterType="string" resultType="double">
        SELECT AVG(SCORE)
        FROM ASS_SELECT_COURSE
        WHERE COURSE_ID = #{courseId}
    </select>

    <select id="listSelectedCourseByStuId" parameterType="string">
        
    </select>
</mapper>